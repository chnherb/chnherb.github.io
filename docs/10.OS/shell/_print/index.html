<!doctype html><html lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=canonical type=text/html href=/docs/10.OS/shell/><link rel=alternate type=application/rss+xml href=/docs/10.OS/shell/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>shell | Herbdocs</title><meta name=description content="Introduction
shell脚本相关
"><meta property="og:title" content="shell"><meta property="og:description" content="Herb's blog"><meta property="og:type" content="website"><meta property="og:url" content="/docs/10.OS/shell/"><meta property="og:site_name" content="Herbdocs"><meta itemprop=name content="shell"><meta itemprop=description content="Herb's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="shell"><meta name=twitter:description content="Herb's blog"><link rel=preload href=/scss/main.min.dcab2c3dae6e6fefb7672f19e4b612cc4e75ca208740f642aa2f1fe378478a8f.css as=style><link href=/scss/main.min.dcab2c3dae6e6fefb7672f19e4b612cc4e75ca208740f642aa2f1fe378478a8f.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img width=6% style=margin-bottom:1% src=/favicons/favicon.ico></span><span class=font-weight-bold>&nbsp;Herbdocs</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Chinese</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/docs/10.OS/shell/>返回本页常规视图</a>.</p></div><h1 class=title>shell</h1><ul><li>1: <a href=#pg-87b710ee2a8cb64508663e95a4eb8f0b>Shebang</a></li><li>2: <a href=#pg-490b491886e52a4b6a3f9d5eb09160a3>curl&wget</a></li><li>3: <a href=#pg-f80614d5954cbe084cff76fe7cb36a6b>shell-find</a></li><li>4: <a href=#pg-a3de2a40d38dbc6507897dc1601203d6>shell文本处理三剑客</a></li><li>5: <a href=#pg-c3ac6af8c8745d6d3daa083e31eb18ed>shell解析json</a></li><li>6: <a href=#pg-217d9697cd7dc2705202d21fc0e09835>获取程序当前路径有多麻烦</a></li></ul><div class=content><h1 id=introduction>Introduction</h1><p>shell脚本相关</p></div></div><div class=td-content><h1 id=pg-87b710ee2a8cb64508663e95a4eb8f0b>1 - Shebang</h1><h1 id=简介>简介</h1><p>在计算机领域，Shebang（也称为Hashbang）是一个由井号和叹号构成的字符序列 <code>#!</code> ，其出现在文本文件中的第一行的前两个字符。</p><p>在文件中存在 Shebang 的情况下，类 Unix 操作系统的程序加载器会分析 Shebang 后的内容，将这些内容作为解释器指令，并调用该指令，并将载有 Shebang 的文件路径作为该解释器的参数。</p><p>例如，以指令 <code>#!/bin/sh</code> 开头的文件在执行时会实际调用 /bin/sh 程序。</p><p>由于 # 符号在许多脚本语言中都是注释标识符，Shebang 的内容会被这些脚本解释器自动忽略。 在 # 字符不是注释标识符的语言中，例如 <a href=https://zh.wikipedia.org/wiki/Scheme>Scheme</a>，解释器也可能忽略以 #! 开头的首行内容，以提供与 Shebang 的兼容性。</p><h1 id=env-bash>env bash</h1><p>使用方式：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#633820>#!/usr/bin/env bash
</span></span></span></code></pre></td></tr></table></div></div></div><h2 id=env-的作用>env 的作用</h2><p>env 命令用于显式系统中已存在的环境变量，以及在定义的环境中执行命令。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>$ ls /usr/bin | grep env
</span></span><span style=display:flex><span>env
</span></span><span style=display:flex><span>printenv
</span></span></code></pre></td></tr></table></div></div></div><p>与 <code>#!/bin/bash</code> 声明了 bash 所在位置，系统知道去哪里找 bash 相比， <code>#!/usr/bin/env bash</code> 只声明了 env 所在位置，然后去 $PATH 中找 bash 的位置。
比如执行 <code>env python</code> 时，它其实会去 <code>env | grep PATH</code> 中的几个路径中依次寻找 python 的可执行文件。</p><h1 id=env-bash和bash对比>env bash和bash对比</h1><h2 id=env-bash优缺点>env bash优缺点</h2><p>优点：</p><ul><li><p><code>#!/usr/bin/env bash</code> 不必在系统的特定位置查找命令解释器，为多系统间的移植提供了极大的灵活性和便利性（某些系统的一些命令解释器并不在 /bin 或一些约定的目录下，而是一些比较奇怪的目录）</p></li><li><p>不了解主机环境时，<code>#!/usr/bin/env bash</code> 可以使开发工作快速开展
缺点：</p></li><li><p>对安全性比较看重时，该写法会出现安全隐患</p></li></ul><blockquote><p>该写法会从 $PATH 中查找命令解释器所在的位置并匹配第一个找到的位置，这意味着可以伪造一个假的命令解释器，并将伪造后的命令解释器所在目录写入 PATH 环境变量中并位于靠前位置，这样就形成了安全隐患。</p></blockquote><ul><li>因为 Shebang 解析的设计导致无法传递多个多个参数</li></ul><blockquote><p>如 <code>#!/usr/bin/perl -w</code> 和 <code>#!/bin/csh -f</code> ，而如果使用 <code>#!/usr/bin/env perl -w</code> 这种写法的话，perl -w 会被当成一个参数，但根本找不到 perl -w 这个命令解释器，就会出错。</p></blockquote><ul><li>某些系统 env 命令的位置不在 /usr/bin 下</li></ul><h2 id=bash优缺点>bash优缺点</h2><p>优点：</p><ul><li><p>准确指出所需命令解释器的位置</p></li><li><p>安全性相对较高</p></li><li><p>可以传递多个参数
缺点：</p></li><li><p>移植性相对较差，很多系统的命令解释器位置不一致</p></li><li><p>一些命令解释器的位置记不住</p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-490b491886e52a4b6a3f9d5eb09160a3>2 - curl&wget</h1><h2 id=curl>curl</h2><h3 id=语法>语法</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl <span style=color:#000>[</span>options<span style=color:#000>]</span> <span style=color:#000>[</span>URL...<span style=color:#000>]</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=参数说明>参数说明</h3><h4 id=d-data>-d/--data</h4><p>参数用于发送 POST 请求的数据体。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -d&#39;login=emma＆password=123&#39;-X POST https://google.com/login
</span></span><span style=display:flex><span># 或者
</span></span><span style=display:flex><span>curl -d &#39;login=emma&#39; -d &#39;password=123&#39; -X POST \
</span></span><span style=display:flex><span>https://google.com/login
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># 读取data.txt文件的内容发送
</span></span><span style=display:flex><span>curl -d &#39;@data.txt&#39; https://google.com/login
</span></span></code></pre></td></tr></table></div></div></div><p>1、--data
value如果是@a_file_name，表示数据来自一个文件，文件中的回车符和换行符将被转换</p><p>2、--data-ascii &lt;key=value></p><p>完全等价于-d</p><ol start=3><li>--data-binary key=value</li></ol><p>HTTP POST请求中的数据为纯二进制数据</p><p>value如果是@file_name，则保留文件中的回车符和换行符，不做任何转换</p><ol start=4><li>--data-raw key=value</li></ol><p>@也作为普通字符串，不会作为文件名给出文件名的标志。即value如果是@file_name，只表示值为“@file_name”的字符串。</p><p>其他等价于-d</p><ol start=5><li>--data-urlencode key=value</li></ol><p>基本同-d，区别在于会将发送的数据进行 URL 编码，如空格等</p><h4 id=f-fail><strong>-f/--fail</strong></h4><p>禁止服务器在打开页面失败或脚本调用失败时向客户端发送错误说明，取而代之，curl 会返回错误码 22</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># curl -fsSL https://get.docker.com | sh</span>
</span></span><span style=display:flex><span>curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span style=display:flex><span>sudo sh get-docker.sh
</span></span></code></pre></td></tr></table></div></div></div><h4 id=f-form>-F/--form</h4><p>模拟表单</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl -F <span style=color:#c41a16>&#34;image=@./1.png&#34;</span> http:xxx     
</span></span><span style=display:flex><span><span style=color:#177500># image 相当于&lt;input type=&#39;file&#39; name=&#39;image&#39;&gt;中name的value，@后面是文件路径</span>
</span></span></code></pre></td></tr></table></div></div></div><h4 id=h-header>-H/--header</h4><p>增加头信息</p><h4 id=i>-i</h4><p>打印出服务器回应的 HTTP 标头。先输出服务器回应的标头，然后空一行，再输出网页的源码。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -i https://www.example.com
</span></span></code></pre></td></tr></table></div></div></div><h4 id=i-head>-I/--head</h4><p>向服务器发出 HEAD 请求，然会将服务器返回的 HTTP 标头打印出来。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -I https://www.example.com
</span></span></code></pre></td></tr></table></div></div></div><h4 id=l-location>-L/--location</h4><p>让 HTTP 请求跟随服务器的重定向。curl 默认不跟随重定向。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -L -d &#39;tweet=hi&#39; https://api.twitter.com/tweet
</span></span></code></pre></td></tr></table></div></div></div><h4 id=o-output>-o/--output</h4><p>将服务器的回应保存成文件，等同于wget命令</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -o example.html https://www.example.com
</span></span></code></pre></td></tr></table></div></div></div><h4 id=o>-O</h4><p>服务器回应保存成文件，并将 URL 的最后部分当作文件名</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl -O https://www.example.com/foo/bar.html <span style=color:#177500># 保存为bar.html</span>
</span></span></code></pre></td></tr></table></div></div></div><h4 id=p-proxytunnel>-p/--proxytunnel</h4><h4 id=s>-s</h4><p>不输出错误和进度信息</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl -s https://www.example.com
</span></span><span style=display:flex><span>curl -s -o /dev/null https://google.com
</span></span></code></pre></td></tr></table></div></div></div><h4 id=s-1>-S</h4><p>参数指定只输出错误信息，通常与-o一起使用。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 没有任何输出，除非发生错误。</span>
</span></span><span style=display:flex><span>curl -S -o /dev/null https://google.com
</span></span></code></pre></td></tr></table></div></div></div><h4 id=v-verbose>-v/--verbose</h4><p>显示更多更详细的信息，调试时使用</p><h4 id=x>-x</h4><p>指定 HTTP 请求的代理，如果没有指定代理协议，默认为 HTTP。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -x socks5://james:cats@myproxy.com:8080 https://www.example.com
</span></span></code></pre></td></tr></table></div></div></div><h4 id=x-request>-X/--request</h4><p>指定 HTTP 请求的方法</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>curl -X POST https://www.example.com
</span></span></code></pre></td></tr></table></div></div></div><h3 id=实战>实战</h3><h4 id=连接是否可用>连接是否可用</h4><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl 10.225.147.108:9669/ping/kitex
</span></span></code></pre></td></tr></table></div></div></div><h4 id=增加header>增加header</h4><style>.highlight{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:130%}.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}</style><details class=code-collapse><summary>Expand/Collapse Code Block</summary><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl -H <span style=color:#c41a16>&#34;X-TT-ENV: boe_cloud_toolkits_debug_42&#34;</span> 10.225.147.108:9669/ping/kitex
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>curl --location --request POST <span style=color:#c41a16>&#39;https://xxx.xxx.org&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>--header <span style=color:#c41a16>&#39;Token: e144c79a-14e8-4908-9edf-d24e02688b36&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>--header <span style=color:#c41a16>&#39;X-TT-LOGID: 1234&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>--header <span style=color:#c41a16>&#39;Content-Type: application/json&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>--data-raw <span style=color:#c41a16>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;language&#34;: &#34;c&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;code&#34;: &#34;I2luY2x1ZGUgPHN0ZGlvLmg+CmludCBtYWluKCkKewogICBwcmludGYoIkhlbGxvLCBXb3JsZCBjISIpOwogICByZXR1cm4gMDsKfQ==&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span><span style=color:#c41a16>&#39;http://xxx.xxx.net&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>-H <span style=color:#c41a16>&#39;Content-Type:application/json&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>-H <span style=color:#c41a16>&#39;Token:e144c79a-14e8-4908-9edf-d24e02688b36&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>-H <span style=color:#c41a16>&#39;X-TT-LOGID:1234567&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>--data <span style=color:#c41a16>&#39;{&#34;language&#34;:&#34;c&#34;,&#34;code&#34;:&#34;I2luY2x1ZGUgPHN0ZGlvLmg+CmludCBtYWluKCkKewogICBwcmludGYoIkhlbGxvLCBXb3JsZCBjISIpOwogICByZXR1cm4gMDsKfQ==&#34;}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fmt.Sprintf<span style=color:#000>(</span><span style=color:#c41a16>&#34;curl -fsSL &#39;%s&#39; -o %s&#34;</span>, downloadURL, downloadPath<span style=color:#000>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>curl -i -X POST <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span> -H <span style=color:#c41a16>&#34;Content-Type:application/json&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span> -d <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span><span style=color:#c41a16>&#39;[
</span></span></span><span style=display:flex><span><span style=color:#c41a16>  {
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;type&#34;: &#34;store&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;key&#34;: &#34;psmlist&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;value&#34;: 3,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;Tags&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#c41a16>      &#34;git&#34;: &#34;cli&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>      &#34;username&#34;: &#34;zhangsan&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    }
</span></span></span><span style=display:flex><span><span style=color:#c41a16>  }
</span></span></span><span style=display:flex><span><span style=color:#c41a16>]&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span><span style=color:#c41a16>&#39;https://xxx.xxx.org/xxx&#39;</span>
</span></span></code></pre></td></tr></table></div></div></details><br><h4 id=上传文件>上传文件</h4><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>cd</span> <span style=color:#c41a16>${</span><span style=color:#000>PRODUCT_OUTPUT_DIR</span><span style=color:#c41a16>}</span> <span style=color:#000>&amp;&amp;</span> curl --location --request POST <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span><span style=color:#c41a16>&#39;xxx.xxx.org/repository/xxx&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>--form <span style=color:#c41a16>&#34;file=@\&#34;</span><span style=color:#c41a16>${</span><span style=color:#000>BUILD_REPO_PACKAGE_NAME</span><span style=color:#c41a16>}</span><span style=color:#c41a16>.tar.gz\&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=获取当前机器ip>获取当前机器ip</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>curl -s http://ipinfo.io/ip
</span></span></code></pre></td></tr></table></div></div></div><h2 id=wget>wget</h2><h3 id=语法说明>语法说明</h3><h3 id=参数说明-1>参数说明</h3><h4 id=b>-b</h4><p>后台下载</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget -b https://xxx/xxx.tar.gz
</span></span><span style=display:flex><span><span style=color:#177500># 将把输出写入至 wget-log</span>
</span></span><span style=display:flex><span><span style=color:#177500># 查看下载进度</span>
</span></span><span style=display:flex><span>tail -f wget-log
</span></span></code></pre></td></tr></table></div></div></div><h4 id=c-continue>-c/--continue</h4><p>断点续传</p><p>对于我们下载大文件时突然由于网络等原因中断非常有帮助，我们可以继续接着下载而不是重新下载一个文件</p><h4 id=i-1>-i</h4><p>下载多个文件</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>cat &gt; filelist.txt 
</span></span><span style=display:flex><span>url1 
</span></span><span style=display:flex><span>url2 
</span></span><span style=display:flex><span>url3 
</span></span><span style=display:flex><span><span style=color:#177500># 接着使用这个文件和参数-i下载 </span>
</span></span><span style=display:flex><span>wget -i filelist.txt
</span></span></code></pre></td></tr></table></div></div></div><h4 id=reject>-reject</h4><p>过滤指定格式下载</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget –reject<span style=color:#000>=</span>gif url   <span style=color:#177500># 过滤gif图片下载某个网站</span>
</span></span></code></pre></td></tr></table></div></div></div><h4 id=limit-rate>-limit-rate</h4><p>设置下载速率</p><h4 id=o-1>-o</h4><p>把下载信息存入日志文件而不是显示在终端</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget -o download.log URL
</span></span></code></pre></td></tr></table></div></div></div><h4 id=o-output-1>-O/--output</h4><p>下载并以不同文件名保存</p><p>下载到对应目录，并且修改文件名称</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget -O xxx.zip http://xxx/xxx
</span></span></code></pre></td></tr></table></div></div></div><h4 id=q-quiet>-q/--quiet</h4><p>安静模式（无信息输出）</p><h4 id=q-quota>-Q/--quota</h4><p>设置下载的容量限制</p><h4 id=v-verbose-1>-v/--verbose</h4><p>输出详细信息</p><h3 id=实战-1>实战</h3><h4 id=下载显示进度>下载显示进度</h4><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget -q --show-progress --progress<span style=color:#000>=</span>dot:mega -O targetFilePath url
</span></span></code></pre></td></tr></table></div></div></div><h4 id=下载重命名>下载重命名</h4><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget -c -O targetFilePath url
</span></span></code></pre></td></tr></table></div></div></div><h2 id=reference>Reference</h2><p><a href=https://www.ruanyifeng.com/blog/2019/09/curl-reference.html>curl用法指南</a></p><p><a href=https://www.ruanyifeng.com/blog/2011/09/curl.html>curl网站开发指南</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-f80614d5954cbe084cff76fe7cb36a6b>3 - shell-find</h1><h2 id=find>find</h2><p>文件或目录查找</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 检索当前文件夹</span>
</span></span><span style=display:flex><span>find .  <span style=color:#177500># 同find . -print</span>
</span></span><span style=display:flex><span><span style=color:#177500># 检索指定文件夹</span>
</span></span><span style=display:flex><span>find dir
</span></span><span style=display:flex><span><span style=color:#177500># 多个目录</span>
</span></span><span style=display:flex><span>find dir1 dir2
</span></span></code></pre></td></tr></table></div></div></div><h3 id=name>-name</h3><p>按文件名搜索</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find ./dir -name <span style=color:#c41a16>&#34;test.txt&#34;</span>  <span style=color:#177500># 隐藏文件 &#34;.*&#34;</span>
</span></span><span style=display:flex><span><span style=color:#177500># 模糊匹配</span>
</span></span><span style=display:flex><span>find ./dir -name <span style=color:#c41a16>&#34;*.txt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#177500># 忽略大小写</span>
</span></span><span style=display:flex><span>find ./dir -iname <span style=color:#c41a16>&#34;test.txt&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=not或>-not或!</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find ./dir -not -name <span style=color:#c41a16>&#34;*.txt&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#177500># 等同</span>
</span></span><span style=display:flex><span>find ./dir ! -name <span style=color:#c41a16>&#34;*.txt&#34;</span>
</span></span><span style=display:flex><span><span style=color:#177500># 多条件检索</span>
</span></span><span style=display:flex><span>find ./dir -name <span style=color:#c41a16>&#39;test&#39;</span> ! -name <span style=color:#c41a16>&#34;*.txt&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=maxdepth>-maxdepth</h3><p>限制目录遍历深度</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find ./dir -maxdepth <span style=color:#1c01ce>2</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=type>-type</h3><p>文件类型</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 仅查询文件</span>
</span></span><span style=display:flex><span>-type f 
</span></span><span style=display:flex><span><span style=color:#177500># 仅查询目录</span>
</span></span><span style=display:flex><span>-type d
</span></span></code></pre></td></tr></table></div></div></div><h3 id=perm>-perm</h3><p>访问权限</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find ./dir --perm <span style=color:#1c01ce>0777</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 2&gt;/dev/null 表示去掉“Permission Denied”的条目</span>
</span></span><span style=display:flex><span>find / -maxdepth <span style=color:#1c01ce>2</span> -perm /u<span style=color:#000>=</span>s 2&gt;/dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 查找只读文件 </span>
</span></span><span style=display:flex><span>-perm /u<span style=color:#000>=</span>r
</span></span><span style=display:flex><span><span style=color:#177500># 查找可执行文件 </span>
</span></span><span style=display:flex><span>-perm /a<span style=color:#000>=</span>x
</span></span></code></pre></td></tr></table></div></div></div><h3 id=user>-user</h3><p>查找属于特定用户</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find dir -user zhangsan
</span></span></code></pre></td></tr></table></div></div></div><h3 id=group>-group</h3><p>查找属于特定组</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find dir -group zhangsan
</span></span></code></pre></td></tr></table></div></div></div><h3 id=time>-time</h3><p>基于修改时间的检索</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 过去N天之内修改的文件</span>
</span></span><span style=display:flex><span>-mtime <span style=color:#1c01ce>10</span>  <span style=color:#177500># +30 30天以前   -1 1天以内</span>
</span></span><span style=display:flex><span><span style=color:#177500># 过去N天之内访问的文件</span>
</span></span><span style=display:flex><span>-atime <span style=color:#1c01ce>10</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=size>-size</h3><p>基于文件大小检索</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>-size 50M
</span></span><span style=display:flex><span><span style=color:#177500># 大于xx小于xx</span>
</span></span><span style=display:flex><span>-size +50M -size -100M
</span></span><span style=display:flex><span>-size +10k
</span></span></code></pre></td></tr></table></div></div></div><h2 id=高级用法>高级用法</h2><h3 id=xargs>xargs</h3><p>与管道一起用</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># {} 替换前面的输出，&#34;\;&#34;固定格式</span>
</span></span><span style=display:flex><span>|xargs rm -rf <span style=color:#000>{}</span> <span style=color:#c41a16>\;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>失效情况，不是所有情况都可以用<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>|xargs cp <span style=color:#000>{}</span> /tmp/ <span style=color:#c41a16>\;</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>可以换成-exec</p><h3 id=exec>-exec</h3><p>使用范围更广（推荐），不需要管道</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find . -name <span style=color:#c41a16>&#34;*.txt&#34;</span> -exec cp -r <span style=color:#000>{}</span> /tmp/ <span style=color:#c41a16>\;</span>
</span></span><span style=display:flex><span><span style=color:#177500># 循环遍历当前目录下最大的5个文件</span>
</span></span><span style=display:flex><span>find . -type f -exec ls -s <span style=color:#000>{}</span> <span style=color:#c41a16>\;</span> | sort -n -r | head -5
</span></span></code></pre></td></tr></table></div></div></div><h2 id=实战>实战</h2><h3 id=将所有文件和目录都恢复成644和755>将所有文件和目录都恢复成644和755</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find . -type f -exec chmod -R <span style=color:#1c01ce>644</span> <span style=color:#000>{}</span> <span style=color:#c41a16>\;</span>
</span></span><span style=display:flex><span>find . -type d -exec chmod -R <span style=color:#1c01ce>755</span> <span style=color:#000>{}</span> <span style=color:#c41a16>\;</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=删除30天以前的日志>删除30天以前的日志</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>find . -type f -name <span style=color:#c41a16>&#34;*.log&#34;</span> -mtime +30 -exec rm -rf <span style=color:#000>{}</span> <span style=color:#c41a16>\;</span>
</span></span></code></pre></td></tr></table></div></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-a3de2a40d38dbc6507897dc1601203d6>4 - shell文本处理三剑客</h1><h1 id=grep>grep</h1><p>grep 命令用于查找文件里符合条件的字符串。</p><h2 id=语法>语法</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>grep <span style=color:#000>[</span>-abcEFGhHilLnqrsvVwxy<span style=color:#000>]</span><span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span><span style=color:#000>[</span>-A&lt;显示行数&gt;<span style=color:#000>][</span>-B&lt;显示列数&gt;<span style=color:#000>][</span>-C&lt;显示列数&gt;<span style=color:#000>][</span>-d&lt;进行动作&gt;<span style=color:#000>]</span><span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span><span style=color:#000>[</span>-e&lt;范本样式&gt;<span style=color:#000>][</span>-f&lt;范本文件&gt;<span style=color:#000>][</span>--help<span style=color:#000>][</span>范本样式<span style=color:#000>][</span>文件或目录...<span style=color:#000>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>grep <span style=color:#c41a16>&#34;root&#34;</span> /etc/passwd
</span></span></code></pre></td></tr></table></div></div></div><p>egrep是grep命令的扩展</p><h3 id=a或-text><strong>-a或--text</strong> </h3><p>不要忽略二进制的数据，以文本文件方式搜索</p><h3 id=c>-c</h3><p>计算找到符合行的次数</p><h3 id=color>--color</h3><p>对查找到的文本颜色标红</p><h3 id=n-或-line-number>-n 或 --line-number</h3><p>在显示符合样式的那一行之前，标示出该行的列数编号。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>grep -n --color <span style=color:#c41a16>&#34;root&#34;</span> /etc/passwd
</span></span></code></pre></td></tr></table></div></div></div><h3 id=v或-invert-match><strong>-v或--invert-match</strong> </h3><p>反向选择，显示不包含匹配文本的所有行。</p><h3 id=h>-h</h3><p>查询多文件时不显示文件名</p><h3 id=i>-i</h3><p>不区分大小写</p><h3 id=l>-l</h3><p>查询多文件时只输出包含匹配字符的文件名</p><h3 id=v>-v</h3><p>取反</p><h3 id=s>-s</h3><p>不显示不存在或无匹配文本的错误信息</p><h3 id=和>^和$</h3><p>^表示以xx字符开头，$表示以什么结尾</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>grep <span style=color:#c41a16>&#34;^root&#34;</span> /etc/passwd
</span></span></code></pre></td></tr></table></div></div></div><h2 id=正则表达式>正则表达式</h2><p>^：锚定行的开头</p><p>$：锚定行的结尾</p><p>"."：点匹配一个非换行符的字符</p><p>"*"：匹配零个或多个先前字符</p><p>".*"：一起用代表任意字符</p><p>[]：匹配一个指定范围内的字符，如"[Gg]rep"匹配Grep和grep</p><p>[^]：匹配一个不再指定范围内的字符，</p><p>{}：匹配次数，{2}表示2次，{1-3}表示1到3次</p><h2 id=实战>实战</h2><h3 id=前后几行>前后几行</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 匹配行及后5行，不区分大小写</span>
</span></span><span style=display:flex><span>grep -A <span style=color:#1c01ce>5</span> -i foo file
</span></span><span style=display:flex><span><span style=color:#177500># 匹配行及前5行，不区分大小写</span>
</span></span><span style=display:flex><span>grep -B <span style=color:#1c01ce>5</span> -i foo file
</span></span><span style=display:flex><span><span style=color:#177500># 匹配行及前后5行，不区分大小写</span>
</span></span><span style=display:flex><span>grep -C <span style=color:#1c01ce>5</span> -i foo file
</span></span></code></pre></td></tr></table></div></div></div><h3 id=调试命令技巧>调试命令技巧</h3><p>使用--color高亮查看grep命令的匹配结果</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>grep <span style=color:#c41a16>&#34;[0-9][0-9]&#34;</span> test.txt
</span></span></code></pre></td></tr></table></div></div></div><h3 id=去除-号行内容和空行>去除#号行内容和空行</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>grep -v <span style=color:#c41a16>&#34;#&#34;</span> /usr/local/nginx/conf/nginx.conf.default | grep -v <span style=color:#c41a16>&#34;^</span>$<span style=color:#c41a16>&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=匹配ip>匹配ip</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>egrep <span style=color:#c41a16>&#34;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}</span>$<span style=color:#c41a16>&#34;</span> test.txt
</span></span><span style=display:flex><span><span style=color:#177500># $表示最后最多只匹配3位数字，$表示结尾</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500>#简化</span>
</span></span><span style=display:flex><span>egrep <span style=color:#c41a16>&#34;([0-9]{1,3}\.){3}[0-9]{1,3}</span>$<span style=color:#c41a16>&#34;</span> test.txt
</span></span></code></pre></td></tr></table></div></div></div><h1 id=awk>awk</h1><p>AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。</p><h2 id=语法-1>语法</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>awk <span style=color:#000>[</span>选项参数<span style=color:#000>]</span> <span style=color:#c41a16>&#39;script&#39;</span> <span style=color:#000>var</span><span style=color:#000>=</span>value file<span style=color:#000>(</span>s<span style=color:#000>)</span>
</span></span><span style=display:flex><span><span style=color:#177500># 或</span>
</span></span><span style=display:flex><span>awk <span style=color:#000>[</span>选项参数<span style=color:#000>]</span> -f scriptfile <span style=color:#000>var</span><span style=color:#000>=</span>value file<span style=color:#000>(</span>s<span style=color:#000>)</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=f>-F</h3><p>指定分割字符（默认以空格为分割字符）</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 用法</span>
</span></span><span style=display:flex><span>-F: 或 -F<span style=color:#c41a16>&#34;:&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 以 : 为分割字符，打印前5行的第1列和最后1列</span>
</span></span><span style=display:flex><span>awk -F: <span style=color:#c41a16>&#39;{print $1,$NF}&#39;</span> /etc/passwd | head -5
</span></span><span style=display:flex><span><span style=color:#177500># 以空格分割打印</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 指定以 : 分割打印</span>
</span></span><span style=display:flex><span>awk -F: <span style=color:#c41a16>&#39;{print $1&#34;:&#34;$NF}&#39;</span> /etc/passwd | head -5
</span></span></code></pre></td></tr></table></div></div></div><h3 id=v-1>-v</h3><p>设置变量</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 数字直接加，字符串拼接</span>
</span></span><span style=display:flex><span>awk -va<span style=color:#000>=</span><span style=color:#1c01ce>1</span> <span style=color:#c41a16>&#39;{print $1,$1+a}&#39;</span> test.txt 
</span></span><span style=display:flex><span>awk -va<span style=color:#000>=</span><span style=color:#1c01ce>1</span> -vb<span style=color:#000>=</span>s <span style=color:#c41a16>&#39;{print $1,$1+a,$1b}&#39;</span> test.txt
</span></span></code></pre></td></tr></table></div></div></div><h2 id=内建变量>内建变量</h2><h3 id=n>$n</h3><p>当前记录的第n个字段，字段间由FS分隔</p><h3 id=0>$0</h3><p>完整记录</p><h3 id=fs>FS</h3><p>字段分隔符(默认是任何空格)</p><h3 id=nf>NF</h3><p>表示一行记录的个数</p><h3 id=nr>NR</h3><p>表示文本的行数（记录数）</p><h2 id=实战-1>实战</h2><h3 id=打印第x列>打印第x列</h3><p>默认以空格为间隔</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 打印第1列</span>
</span></span><span style=display:flex><span>awk <span style=color:#c41a16>&#39;{print $1}&#39;</span> test.txt
</span></span><span style=display:flex><span><span style=color:#177500># 打印第3列</span>
</span></span><span style=display:flex><span>awk <span style=color:#c41a16>&#39;{print $3}&#39;</span> test.txt
</span></span><span style=display:flex><span><span style=color:#177500># 打印最后1列</span>
</span></span><span style=display:flex><span>awk <span style=color:#c41a16>&#39;{print $NF}&#39;</span> test.txt
</span></span><span style=display:flex><span><span style=color:#177500># 打印倒数第2列</span>
</span></span><span style=display:flex><span>awk <span style=color:#c41a16>&#39;{print $(NF-1)}&#39;</span> test.txt
</span></span></code></pre></td></tr></table></div></div></div><h3 id=打印本机ip>打印本机ip</h3><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># linux查找ip</span>
</span></span><span style=display:flex><span>ifconfig | grep <span style=color:#c41a16>&#34;inet addr:&#34;</span> | grep -v <span style=color:#c41a16>&#34;127.0.0.1&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| awk <span style=color:#c41a16>&#39;{print $2}&#39;</span> | awk -F<span style=color:#c41a16>&#34;addr:&#34;</span> <span style=color:#c41a16>&#39;{print $2}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 将ip的点换成-</span>
</span></span><span style=display:flex><span>xx接上
</span></span><span style=display:flex><span>| awk -F. <span style=color:#c41a16>&#39;{print $1&#34;-&#34;$2&#34;-&#34;$3&#34;-&#34;$4}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#177500># 一般机房主机名</span>
</span></span><span style=display:flex><span>| awk -F. <span style=color:#c41a16>&#39;{print &#34;xx-WEB&#34;$1&#34;-&#34;$2&#34;-&#34;$3&#34;-&#34;$4&#34;.xx.net&#34;}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 修改主机名，反引号表示当做一串命令执行</span>
</span></span><span style=display:flex><span>host <span style=color:#c41a16>`</span>ifconfig | grep <span style=color:#c41a16>&#34;inet addr:&#34;</span> | grep -v <span style=color:#c41a16>&#34;127.0.0.1&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| awk <span style=color:#c41a16>&#39;{print $2}&#39;</span> | awk -F<span style=color:#c41a16>&#34;addr:&#34;</span> <span style=color:#c41a16>&#39;{print $2}&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| awk -F. <span style=color:#c41a16>&#39;{print &#34;xx-WEB&#34;$1&#34;-&#34;$2&#34;-&#34;$3&#34;-&#34;$4&#34;.xx.net&#34;}&#39;</span><span style=color:#c41a16>`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># mac查找ip</span>
</span></span><span style=display:flex><span>ifconfig | grep <span style=color:#c41a16>&#34;inet &#34;</span> | grep -v <span style=color:#c41a16>&#34;127.0.0.1&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| awk <span style=color:#c41a16>&#39;{print $2}&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><h1 id=sed>sed</h1><p>sed 命令是利用脚本来处理文本文件。</p><p>注意：<strong>sed里面有变量必须用双引号</strong></p><h2 id=语法-2>语法</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>sed [-hnV][-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件]
</span></span></code></pre></td></tr></table></div></div></div><h3 id=i-1>-i</h3><p>修改文件内容</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sed -i <span style=color:#c41a16>&#39;s/old/new/2&#39;</span> test.txt  <span style=color:#177500># 不加-i不修改文件内容</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=s-取代>s 取代</h3><p>字符替换</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>格式：
</span></span><span style=display:flex><span>s///g 或者 s###g 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 替换第1个old字符</span>
</span></span><span style=display:flex><span>sed <span style=color:#c41a16>&#39;s/old/new/1&#39;</span> test.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 替换第2个old字符</span>
</span></span><span style=display:flex><span>sed <span style=color:#c41a16>&#39;s/old/new/2&#39;</span> test.txt 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 全部替换</span>
</span></span><span style=display:flex><span>sed <span style=color:#c41a16>&#39;s/old/new/g&#39;</span> test.txt 
</span></span></code></pre></td></tr></table></div></div></div><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>sed -e &#34;0,/\&#34;name\&#34;:.*$/s//\&#34;name\&#34;: \&#34;$mount_docker_path\&#34;/1&#34; daemon.json
</span></span></code></pre></td></tr></table></div></div></div><p>问题：
行尾逗号比较难处理</p><p>sed参考：</p><p><a href=https://wangchujiang.com/linux-command/c/sed.html>https://wangchujiang.com/linux-command/c/sed.html</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c3ac6af8c8745d6d3daa083e31eb18ed>5 - shell解析json</h1><h1 id=背景>背景</h1><p>写一个自动安装程序的脚本，脚本需要查询接口最近的版本号从而拼接链接去下载固定的版本程序。但是之前解析json用的是jq，有一定的依赖性，虽然针对LInux没有安装jq脚本会帮忙自动安装，但是对于mac或其他平台没有做适配。鉴此，打算增加一个兜底逻辑，没有安装jq就自动解析字符串json</p><h2 id=heading></h2><h1 id=目标>目标</h1><p>解析json数组中第一个对象的固定字段。如下需要解析出"1.0.0.59"：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span>[{
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;version&#34;</span>: <span style=color:#c41a16>&#34;1.0.0.59&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;arch&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#c41a16>&#34;x86_64&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;type&#34;</span>: <span style=color:#c41a16>&#34;online&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;create_user&#34;</span>: <span style=color:#c41a16>&#34;zhangsan&#34;</span>
</span></span><span style=display:flex><span>},
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;version&#34;</span>: <span style=color:#c41a16>&#34;1.0.0.58&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;arch&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#c41a16>&#34;x86_64&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;type&#34;</span>: <span style=color:#c41a16>&#34;online&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#000>&#34;create_user&#34;</span>: <span style=color:#c41a16>&#34;zhangsan&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>]
</span></span></code></pre></td></tr></table></div></div></div><h1 id=涉及命令>涉及命令</h1><h2 id=sed>sed</h2><p>主要做字符替换</p><p>全局字符替换</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sed <span style=color:#c41a16>&#39;s/old_str/new_str/g&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><h2 id=grep>grep</h2><p>主要负责行查找</p><h2 id=awk>awk</h2><p>主要做列解析</p><p>取第一行</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>awk <span style=color:#c41a16>&#39;NR==1&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>取第一列<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>awk <span style=color:#c41a16>&#39;{print $1}&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div></p><h1 id=实战>实战</h1><p>脚本名为：parse_json.sh，文件名为json.txt</p><h2 id=grep处理字符串和文件的区别>grep处理字符串和文件的区别</h2><p>首先，解析出version行的内容。</p><p>grep处理多行文件和一行文件是有区别的。</p><p><strong>获取version行命令</strong></p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># echo $(cat &#34;json.txt&#34; | grep &#34;version&#34;)</span>
</span></span><span style=display:flex><span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span> | grep <span style=color:#c41a16>&#34;version&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>如处理上文中多行文件输出：<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>&#34;version&#34;: &#34;1.0.0.59&#34;, &#34;version&#34;: &#34;1.0.0.58&#34;,
</span></span></code></pre></td></tr></table></div></div></div></p><p>但如果使用以下命令将文件处理成一行：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span><span style=color:#a90d91>)</span> &gt; <span style=color:#c41a16>&#34;json2.txt&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>然后将执行 “获取version行命令” (修改文件名为json2.txt)<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>cat <span style=color:#c41a16>&#34;json2.txt&#34;</span> | grep <span style=color:#c41a16>&#34;version&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>此时输出的是整个一行文件。问题原因：grep是按行来区分的。</p><blockquote><p>如果将多行文件内容硬编码在脚本里也是当做一行处理的！！错误效果同上</p></blockquote><h2 id=sed替换-为多行>sed替换,为多行</h2><p>解决上面问题需要用到 sed将“,”替换成“
”，</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>cat <span style=color:#c41a16>&#34;json2.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span> | grep <span style=color:#c41a16>&#34;version&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>结果依然是一行文件，原因：grep不能识别其中的换行符。</p><h2 id=echo-e识别换行符>echo -e识别换行符</h2><p>可以借助 echo -e 识别换行符。</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json2.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> | grep <span style=color:#c41a16>&#34;version&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>或增加中间变量，效果相同：<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#000>s1</span><span style=color:#000>=</span><span style=color:#a90d91>$(</span><span style=color:#a90d91>echo</span> -e <span style=color:#000>$info</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span>
</span></span><span style=display:flex><span><span style=color:#177500># echo -e &#34;s1:</span>
</span></span><span style=display:flex><span><span style=color:#c41a16>${</span><span style=color:#000>s1</span><span style=color:#c41a16>}</span><span style=color:#c41a16>&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16># echo -e &#34;</span>s2:
</span></span><span style=display:flex><span><span style=color:#a90d91>$(</span><span style=color:#a90d91>echo</span> -e <span style=color:#000>$s1</span> | grep <span style=color:#c41a16>&#34;version&#34;</span><span style=color:#a90d91>)</span><span style=color:#c41a16>&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>echo -e </span><span style=color:#000>$s1</span><span style=color:#c41a16> | grep &#34;</span>version<span style=color:#c41a16>&#34;
</span></span></span></code></pre></td></tr></table></div></div></div></p><h2 id=兼容一行或多行>兼容一行或多行</h2><p>不管一行多行将其先转成一行，在根据“,”转成多行</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| grep <span style=color:#c41a16>&#34;version&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>这样不管文件内容如何多行或几行串在一行都不会影响最终解析结果，如1，2，3行一行，其余都是一行；或者version跟版本号不在一行 等等情况。</p><h2 id=awk取第一行>awk取第一行</h2><p>不管文件内容如何变动，执行以下命令都能稳定获取结果</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| grep <span style=color:#c41a16>&#34;version&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| awk <span style=color:#c41a16>&#39;NR==1&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>结果为：<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>[{ &#34;version&#34;: &#34;1.0.0.59&#34;
</span></span></code></pre></td></tr></table></div></div></div></p><h2 id=sed按照-分割成两行>sed按照:分割成两行</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| grep <span style=color:#c41a16>&#34;version&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| awk <span style=color:#c41a16>&#39;NR==1&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/:/\n/g&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>删除第一行<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span><span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | grep <span style=color:#c41a16>&#34;version&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | awk <span style=color:#c41a16>&#39;NR==1&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | sed <span style=color:#c41a16>&#39;s/:/\n/g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;1d&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div></p><p>得到：<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span> <span style=color:#c41a16>&#34;1.0.0.59&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div></p><h2 id=sed去除-和空格>sed去除"和空格</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span><span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | grep <span style=color:#c41a16>&#34;version&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | awk <span style=color:#c41a16>&#39;NR==1&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | sed <span style=color:#c41a16>&#39;s/:/\n/g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;1d&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/&#34;/\ /g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/ //g&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>得到最终结果<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>1.0.0.59
</span></span></code></pre></td></tr></table></div></div></div></p><h2 id=暴力测试>暴力测试</h2><p>将json字符串任意换行（不破坏引号内字符串内容），结果都是正确的</p><h1 id=相关文件>相关文件</h1><h2 id=parse-json-sh>parse_json.sh</h2><style>.highlight{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:130%}.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}</style><details class=code-collapse><summary>Expand/Collapse Code Block</summary><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#633820>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#633820></span><span style=color:#177500># set -x </span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#000>json_content</span><span style=color:#000>=</span><span style=color:#c41a16>&#39;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>[{
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;version&#34;: &#34;1.0.0.59&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;arch&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#c41a16>            &#34;x86_64&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        ],
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;type&#34;: &#34;online&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;create_user&#34;: &#34;zhangsan&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>},
</span></span></span><span style=display:flex><span><span style=color:#c41a16>{
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;version&#34;: &#34;1.0.0.58&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;arch&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#c41a16>            &#34;x86_64&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        ],
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;type&#34;: &#34;online&#34;,
</span></span></span><span style=display:flex><span><span style=color:#c41a16>        &#34;create_user&#34;: &#34;zhangsan&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>}
</span></span></span><span style=display:flex><span><span style=color:#c41a16>]&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 解析文件</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span><span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span>cat <span style=color:#c41a16>&#34;json2.txt&#34;</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | grep <span style=color:#c41a16>&#34;version&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | awk <span style=color:#c41a16>&#39;NR==1&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | sed <span style=color:#c41a16>&#39;s/:/\n/g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;1d&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/&#34;/\ /g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/ //g&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 解析字符串，或去掉echo -e $json_content中的-e 表示不转换换行</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span><span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>echo</span> -e <span style=color:#a90d91>$(</span><span style=color:#a90d91>echo</span> -e <span style=color:#000>$json_content</span> | sed <span style=color:#c41a16>&#39;s/\n//g&#39;</span> | sed <span style=color:#c41a16>&#39;s/,/\n/g&#39;</span><span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | grep <span style=color:#c41a16>&#34;version&#34;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | awk <span style=color:#c41a16>&#39;NR==1&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    | sed <span style=color:#c41a16>&#39;s/:/\n/g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>    <span style=color:#a90d91>)</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;1d&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/&#34;/\ /g&#39;</span> <span style=color:#c41a16>\
</span></span></span><span style=display:flex><span><span style=color:#c41a16></span>| sed <span style=color:#c41a16>&#39;s/ //g&#39;</span>
</span></span></code></pre></td></tr></table></div></div></details><br><h2 id=json-txt>json.txt</h2><p>见本文开头</p><h2 id=json2-txt>json2.txt</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span>[{   
</span></span><span style=display:flex><span>         &#34;version&#34;:
</span></span><span style=display:flex><span> &#34;1.0.0.59&#34;, &#34;arch&#34;: [ &#34;x86_64&#34; ], &#34;type&#34;: &#34;online&#34;, &#34;create_user&#34;: &#34;zhangsan&#34; }, { &#34;version&#34;: 
</span></span><span style=display:flex><span> &#34;1.0.0.58&#34;, &#34;arch&#34;: [ &#34;x86_64&#34; ], &#34;type&#34;: &#34;online&#34;, 
</span></span><span style=display:flex><span> &#34;create_user&#34;: &#34;zhangsan&#34; } ]
</span></span></code></pre></td></tr></table></div></div></div><h2 id=运行脚本>运行脚本</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>bash parse_json.sh
</span></span></code></pre></td></tr></table></div></div></div><h1 id=jq解析>jq解析</h1><h2 id=安装>安装</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>brew install jq <span style=color:#177500># 失败可以使用port安装</span>
</span></span><span style=display:flex><span>sudo port install jq
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt-get install jq
</span></span></code></pre></td></tr></table></div></div></div><h2 id=解析json>解析json</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>cat <span style=color:#c41a16>&#34;json2.txt&#34;</span> | jq -r <span style=color:#c41a16>&#39;.[0].version&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> <span style=color:#000>$json_content</span> | jq -r <span style=color:#c41a16>&#39;.[0].version&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>echo</span> -e <span style=color:#000>$json_content</span> | jq -r <span style=color:#c41a16>&#39;.[0].version&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><h1 id=tips>tips</h1><h2 id=sed替换>sed替换[</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sed <span style=color:#c41a16>&#39;s/[/ /g&#39;</span>  <span style=color:#177500># 可能需要增加个空格？</span>
</span></span></code></pre></td></tr></table></div></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-217d9697cd7dc2705202d21fc0e09835>6 - 获取程序当前路径有多麻烦</h1><h1 id=背景>背景</h1><p>为了实现程序自己更新自己，需要获取当前程序的安装路径。</p><h1 id=程序执行方式>程序执行方式</h1><p>程序可以通过如下几种方式来执行：</p><h2 id=软链接>软链接</h2><p>通过软链接执行程序</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 生成软链接</span>
</span></span><span style=display:flex><span>ln -s /Users/bo/util-cli/util-cli_darwin_amd64 /usr/local/bin/util-cli
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 1、在 非/usr/local/bin路径下执行</span>
</span></span><span style=display:flex><span>util-cli
</span></span><span style=display:flex><span><span style=color:#177500># 2、在/usr/local/bin路径下执行</span>
</span></span><span style=display:flex><span>util-cli
</span></span></code></pre></td></tr></table></div></div></div><h2 id=相对路径>相对路径</h2><p>如以下命令：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># 1、当前路径</span>
</span></span><span style=display:flex><span>./util-cli_darwin_amd64
</span></span><span style=display:flex><span><span style=color:#177500># 2、父目录</span>
</span></span><span style=display:flex><span>./install_dir/util-cli_darwin_amd64
</span></span><span style=display:flex><span><span style=color:#177500># 3、当前路径</span>
</span></span><span style=display:flex><span>../install_dir/util-cli_darwin_amd64
</span></span></code></pre></td></tr></table></div></div></div><h2 id=alias>alias</h2><p>通过在 .bash_profile或 .bash_rc 中配置 alias 的方式来执行</p><p>注意：脚本配置 alias 需要用 source 执行脚本而不是 bash 等，否则alias不会生效</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>alias</span> util-cli<span style=color:#000>=</span><span style=color:#c41a16>&#34;/Users/bo/util-cli/util-cli_darwin_amd64&#34;</span>
</span></span></code></pre></td></tr></table></div></div></div><h1 id=解决方案>解决方案</h1><p>针对以上三个类情况对文件安装目录进行解析，然后安装替换。</p><h2 id=运行程序名称>运行程序名称</h2><p>通过os.Args[0] 来获取程序运行名称。</p><h3 id=软链接方式>软链接方式</h3><p>程序名称为输入的程序名称，如 util-cli</p><h3 id=相对路径-1>相对路径</h3><p>同上，程序名称为输入的程序名称，如</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>./install_dir/util-cli_darwin_amd64
</span></span><span style=display:flex><span><span style=color:#177500># 或</span>
</span></span><span style=display:flex><span>./install_dir/util-cli_darwin_amd64  <span style=color:#177500># 等</span>
</span></span></code></pre></td></tr></table></div></div></div><h3 id=alias-1>alias</h3><p>程序名称为文件全路径，如</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>/Users/bo/util-cli/util-cli_darwin_amd64
</span></span></code></pre></td></tr></table></div></div></div><h2 id=which-type>which/type</h2><p>可通过 which type 等命令来获取其软链地址</p><p>注意：</p><p>1、which、type 不可获取 alias 地址，尤其是 sh -c which/type xxx会报错</p><p>2、程序运行时，which、type获取不到alias的别名信息，与环境有关</p><h2 id=pwd>pwd</h2><p>通过pwd或者os.Getwd()来获取当前运行路径，然后拼接运行程序名获取全路径，可解决 相对路径 执行方式</p><h1 id=核心解决思路>核心解决思路</h1><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>ls -ld <span style=color:#a90d91>$(</span>programName<span style=color:#a90d91>)</span> | awk <span style=color:#c41a16>&#39;{print $(NF)}&#39;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>该命令可解决 软链在其目录下 和 alias 的执行方式
其他情况可搭配 which pwd 处理</p><h1 id=程序代码>程序代码</h1><style>.highlight{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:130%}.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}</style><details class=code-collapse><summary>Expand/Collapse Code Block</summary><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a90d91>func</span> <span style=color:#000>getProgramRealDir</span>(<span style=color:#000>programName</span> <span style=color:#a90d91>string</span>) (<span style=color:#a90d91>string</span>, <span style=color:#a90d91>error</span>) {
</span></span><span style=display:flex><span>   <span style=color:#000>programPath</span>, <span style=color:#000>err</span> <span style=color:#000>:=</span> <span style=color:#000>util</span>.<span style=color:#000>ShellExecWithWorkDir</span>(<span style=color:#000>fmt</span>.<span style=color:#000>Sprintf</span>(<span style=color:#c41a16>&#34;ls -ld %s | awk &#39;{print $(NF)}&#39;&#34;</span>, <span style=color:#000>programName</span>), <span style=color:#c41a16>&#34;.&#34;</span>)
</span></span><span style=display:flex><span>   <span style=color:#a90d91>if</span> <span style=color:#000>err</span> <span style=color:#000>!=</span> <span style=color:#a90d91>nil</span> {
</span></span><span style=display:flex><span>      <span style=color:#a90d91>return</span> <span style=color:#c41a16>&#34;&#34;</span>, <span style=color:#000>err</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#000>realDir</span> <span style=color:#000>:=</span> <span style=color:#c41a16>&#34;&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#177500>// ln -s, not in /usr/local/bin
</span></span></span><span style=display:flex><span><span style=color:#177500></span>   <span style=color:#a90d91>if</span> <span style=color:#000>strings</span>.<span style=color:#000>HasSuffix</span>(<span style=color:#000>programPath</span>, <span style=color:#c41a16>&#34;No such file or directory&#34;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#000>lnCmdPath</span>, <span style=color:#000>err</span> <span style=color:#000>:=</span> <span style=color:#000>util</span>.<span style=color:#000>ShellExecWithWorkDir</span>(<span style=color:#000>fmt</span>.<span style=color:#000>Sprintf</span>(<span style=color:#c41a16>&#34;which %s&#34;</span>, <span style=color:#000>programName</span>), <span style=color:#c41a16>&#34;.&#34;</span>)
</span></span><span style=display:flex><span>      <span style=color:#a90d91>if</span> <span style=color:#000>err</span> <span style=color:#000>!=</span> <span style=color:#a90d91>nil</span> {
</span></span><span style=display:flex><span>         <span style=color:#a90d91>return</span> <span style=color:#c41a16>&#34;&#34;</span>, <span style=color:#000>err</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#000>realDir</span>, <span style=color:#000>err</span> = <span style=color:#000>util</span>.<span style=color:#000>ShellExecWithWorkDir</span>(<span style=color:#000>fmt</span>.<span style=color:#000>Sprintf</span>(<span style=color:#c41a16>&#34;ls -ld %s | awk &#39;{print $(NF)}&#39;&#34;</span>, <span style=color:#000>lnCmdPath</span>), <span style=color:#c41a16>&#34;.&#34;</span>)
</span></span><span style=display:flex><span>      <span style=color:#a90d91>if</span> <span style=color:#000>err</span> <span style=color:#000>!=</span> <span style=color:#a90d91>nil</span> {
</span></span><span style=display:flex><span>         <span style=color:#a90d91>return</span> <span style=color:#c41a16>&#34;&#34;</span>, <span style=color:#000>err</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#a90d91>return</span> <span style=color:#000>filepath</span>.<span style=color:#000>Dir</span>(<span style=color:#000>realDir</span>), <span style=color:#a90d91>nil</span>
</span></span><span style=display:flex><span>   } <span style=color:#a90d91>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#177500>// alias and ln -s in /usr/local/bin
</span></span></span><span style=display:flex><span><span style=color:#177500></span>      <span style=color:#000>realDir</span> = <span style=color:#000>filepath</span>.<span style=color:#000>Dir</span>(<span style=color:#000>programPath</span>)
</span></span><span style=display:flex><span>      <span style=color:#177500>// relative path
</span></span></span><span style=display:flex><span><span style=color:#177500></span>      <span style=color:#a90d91>if</span> <span style=color:#000>strings</span>.<span style=color:#000>HasPrefix</span>(<span style=color:#000>programPath</span>, <span style=color:#c41a16>&#34;.&#34;</span>) {
</span></span><span style=display:flex><span>         <span style=color:#000>pwd</span>, <span style=color:#000>err</span> <span style=color:#000>:=</span> <span style=color:#000>os</span>.<span style=color:#000>Getwd</span>()
</span></span><span style=display:flex><span>         <span style=color:#a90d91>if</span> <span style=color:#000>err</span> <span style=color:#000>!=</span> <span style=color:#a90d91>nil</span> {
</span></span><span style=display:flex><span>            <span style=color:#a90d91>return</span> <span style=color:#c41a16>&#34;&#34;</span>, <span style=color:#a90d91>nil</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         <span style=color:#000>programDir</span> <span style=color:#000>:=</span> <span style=color:#000>filepath</span>.<span style=color:#000>Dir</span>(<span style=color:#000>programPath</span>)
</span></span><span style=display:flex><span>         <span style=color:#a90d91>if</span> <span style=color:#000>programDir</span> <span style=color:#000>==</span> <span style=color:#c41a16>&#34;.&#34;</span> {
</span></span><span style=display:flex><span>            <span style=color:#000>realDir</span> = <span style=color:#000>pwd</span>
</span></span><span style=display:flex><span>         } <span style=color:#a90d91>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#000>realDir</span> = <span style=color:#000>fmt</span>.<span style=color:#000>Sprintf</span>(<span style=color:#c41a16>&#34;%s/%s&#34;</span>, <span style=color:#000>pwd</span>, <span style=color:#000>programDir</span>)
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#a90d91>return</span> <span style=color:#000>realDir</span>, <span style=color:#a90d91>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div></details><br></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Herb 保留所有权利</small>
<small class=ml-1><a href=# target=_blank rel=noopener>隐私政策</a></small><p class=mt-2><a href=/about/>Herbdocs</a></p></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>