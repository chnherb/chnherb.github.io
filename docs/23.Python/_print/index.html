<!doctype html><html lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=canonical type=text/html href=/docs/23.Python/><link rel=alternate type=application/rss+xml href=/docs/23.Python/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Python | Herbdocs</title><meta name=description content="Introduction
Python相关知识
"><meta property="og:title" content="Python"><meta property="og:description" content="Herb's blog"><meta property="og:type" content="website"><meta property="og:url" content="/docs/23.Python/"><meta property="og:site_name" content="Herbdocs"><meta itemprop=name content="Python"><meta itemprop=description content="Herb's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python"><meta name=twitter:description content="Herb's blog"><link rel=preload href=/scss/main.min.dcab2c3dae6e6fefb7672f19e4b612cc4e75ca208740f642aa2f1fe378478a8f.css as=style><link href=/scss/main.min.dcab2c3dae6e6fefb7672f19e4b612cc4e75ca208740f642aa2f1fe378478a8f.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img width=6% style=margin-bottom:1% src=/favicons/favicon.ico></span><span class=font-weight-bold>&nbsp;Herbdocs</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Chinese</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/docs/23.Python/>返回本页常规视图</a>.</p></div><h1 class=title>Python</h1><ul><li>1: <a href=#pg-122f0aa50c09903f81332ccd2706ac17>pydemo</a></li><li>2: <a href=#pg-239a38d334b1b526cda12cea08410f28>selenium使用</a></li></ul><div class=content><h1 id=introduction>Introduction</h1><p>Python相关知识</p></div></div><div class=td-content><h1 id=pg-122f0aa50c09903f81332ccd2706ac17>1 - pydemo</h1><h1 id=语法>语法</h1><h2 id=路径>路径</h2><style>.highlight{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:130%}.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}</style><details class=code-collapse><summary>Expand/Collapse Code Block</summary><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>os</span><span style=color:#000>.</span><span style=color:#000>getcwd</span>())
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>os</span><span style=color:#000>.</span><span style=color:#000>path</span><span style=color:#000>.</span><span style=color:#000>abspath</span>(<span style=color:#000>os</span><span style=color:#000>.</span><span style=color:#000>path</span><span style=color:#000>.</span><span style=color:#000>dirname</span>(<span style=color:#000>__file__</span>))) 
</span></span><span style=display:flex><span><span style=color:#177500># 版本判断</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>sys</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>if</span> ((<span style=color:#1c01ce>3</span>, <span style=color:#1c01ce>0</span>) <span style=color:#000>&lt;=</span> <span style=color:#000>sys</span><span style=color:#000>.</span><span style=color:#000>version_info</span> <span style=color:#000>&lt;=</span> (<span style=color:#1c01ce>3</span>, <span style=color:#1c01ce>9</span>)):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>from</span> <span style=color:#000>urllib.parse</span> <span style=color:#a90d91>import</span> <span style=color:#000>urlparse</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>elif</span> ((<span style=color:#1c01ce>2</span>, <span style=color:#1c01ce>0</span>) <span style=color:#000>&lt;=</span> <span style=color:#000>sys</span><span style=color:#000>.</span><span style=color:#000>version_info</span> <span style=color:#000>&lt;=</span> (<span style=color:#1c01ce>2</span>, <span style=color:#1c01ce>9</span>)):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>from</span> <span style=color:#000>urlparse</span> <span style=color:#a90d91>import</span> <span style=color:#000>urlparse</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 去除空邮箱</span>
</span></span><span style=display:flex><span><span style=color:#000>mail_box_list</span> <span style=color:#000>=</span> [<span style=color:#000>_</span> <span style=color:#a90d91>for</span> <span style=color:#000>_</span> <span style=color:#000>in</span> <span style=color:#000>mail_box_list</span> <span style=color:#a90d91>if</span> <span style=color:#000>_</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>from</span> <span style=color:#000>datetime</span> <span style=color:#a90d91>import</span> <span style=color:#000>date</span>
</span></span><span style=display:flex><span><span style=color:#000>today</span> <span style=color:#000>=</span> <span style=color:#000>date</span><span style=color:#000>.</span><span style=color:#000>today</span>()
</span></span><span style=display:flex><span><span style=color:#177500># 判断是否为周二或周五</span>
</span></span><span style=display:flex><span><span style=color:#000>today</span><span style=color:#000>.</span><span style=color:#000>weekday</span>() <span style=color:#000>in</span> [<span style=color:#1c01ce>1</span>, <span style=color:#1c01ce>4</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>invoice_process_dict</span> <span style=color:#000>=</span> {<span style=color:#000>process</span><span style=color:#000>.</span><span style=color:#000>id</span>: <span style=color:#000>process</span> <span style=color:#a90d91>for</span> <span style=color:#000>process</span> <span style=color:#000>in</span> <span style=color:#000>process_list</span>}
</span></span><span style=display:flex><span><span style=color:#000>result</span> <span style=color:#000>=</span> [<span style=color:#000>invoice</span> <span style=color:#a90d91>for</span> <span style=color:#000>invoice</span> <span style=color:#000>in</span> <span style=color:#000>invoice_list</span> <span style=color:#a90d91>if</span> <span style=color:#000>is_switch_open</span>(<span style=color:#000>inv</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>for</span> <span style=color:#000>index</span>, <span style=color:#000>item</span> <span style=color:#000>in</span> <span style=color:#a90d91>enumerate</span>(<span style=color:#000>l</span>):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>list_partition</span>(<span style=color:#000>ls</span>, <span style=color:#000>size</span>):
</span></span><span style=display:flex><span>    <span style=color:#c41a16>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    列表等分
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    :param ls:
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    :param size:
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    :return:
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> [<span style=color:#000>ls</span>[<span style=color:#000>i</span>:<span style=color:#000>i</span> <span style=color:#000>+</span> <span style=color:#000>size</span>] <span style=color:#a90d91>for</span> <span style=color:#000>i</span> <span style=color:#000>in</span> <span style=color:#a90d91>range</span>(<span style=color:#1c01ce>0</span>, <span style=color:#a90d91>len</span>(<span style=color:#000>ls</span>), <span style=color:#000>size</span>)]
</span></span></code></pre></td></tr></table></div></div></details><br><h2 id=format>format</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>table_template</span> <span style=color:#000>=</span> 
</span></span><span style=display:flex><span><span style=color:#c41a16>&#34;&#34;&#34;&lt;td&gt;</span><span style=color:#c41a16>{invoice_serial}</span><span style=color:#c41a16>&lt;/td&gt;&lt;td&gt;</span><span style=color:#c41a16>{should_pay_date}</span><span style=color:#c41a16>&lt;/td&gt;&lt;td&gt;</span><span style=color:#c41a16>{over_due_day}</span><span style=color:#c41a16>&lt;/td&gt;&lt;/tr&gt;&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>table_content</span> <span style=color:#000>=</span> <span style=color:#000>table_template</span><span style=color:#000>.</span><span style=color:#000>format</span>(<span style=color:#000>invoice_serial</span><span style=color:#000>=</span><span style=color:#000>invoice_serial</span>,
</span></span><span style=display:flex><span>                            <span style=color:#000>should_pay_date</span> <span style=color:#000>=</span> <span style=color:#000>should_pay_date</span>,
</span></span><span style=display:flex><span>                          <span style=color:#000>over_due_day</span> <span style=color:#000>=</span> <span style=color:#000>should_pay_date</span>)
</span></span><span style=display:flex><span>                          
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 打印{}</span>
</span></span><span style=display:flex><span><span style=color:#000>operate_detail_info</span> <span style=color:#000>=</span> <span style=color:#c41a16>&#34;account催款联系人邮箱:{{</span><span style=color:#c41a16>{}</span><span style=color:#c41a16>}} &gt; {{</span><span style=color:#c41a16>{}</span><span style=color:#c41a16>}}&#34;</span><span style=color:#000>.</span><span style=color:#000>format</span>(<span style=color:#000>old_value</span>, <span style=color:#000>new_value</span>)
</span></span></code></pre></td></tr></table></div></div></div><h2 id=去除英式符号>去除英式符号</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>string</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>remove_punctuation</span>(<span style=color:#5b269a>self</span>, <span style=color:#000>stri</span>): 
</span></span><span style=display:flex><span>  <span style=color:#000>punctuation_string</span> <span style=color:#000>=</span> <span style=color:#000>string</span><span style=color:#000>.</span><span style=color:#000>punctuation</span> 
</span></span><span style=display:flex><span>  <span style=color:#a90d91>for</span> <span style=color:#000>s</span> <span style=color:#000>in</span> <span style=color:#000>punctuation_string</span>: 
</span></span><span style=display:flex><span>    <span style=color:#000>stri</span> <span style=color:#000>=</span> <span style=color:#000>stri</span><span style=color:#000>.</span><span style=color:#000>replace</span>(<span style=color:#000>s</span>, <span style=color:#c41a16>&#39;&#39;</span>) 
</span></span><span style=display:flex><span>  <span style=color:#a90d91>return</span> <span style=color:#000>stri</span>
</span></span></code></pre></td></tr></table></div></div></div><h2 id=groupby>groupby</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>from</span> <span style=color:#000>itertools</span> <span style=color:#a90d91>import</span> <span style=color:#000>groupby</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>group_by</span>(<span style=color:#000>item_list</span>, <span style=color:#000>key_func</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> {<span style=color:#000>key</span>: <span style=color:#a90d91>list</span>(<span style=color:#000>val</span>) <span style=color:#a90d91>for</span> <span style=color:#000>key</span>, <span style=color:#000>val</span> <span style=color:#000>in</span> <span style=color:#000>groupby</span>(<span style=color:#000>item_list</span>, <span style=color:#000>key</span><span style=color:#000>=</span><span style=color:#000>key_func</span>)}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#000>item_list2</span> <span style=color:#000>=</span> <span style=color:#a90d91>None</span>
</span></span><span style=display:flex><span>    <span style=color:#000>item_dict2</span> <span style=color:#000>=</span> <span style=color:#000>group_by</span>(<span style=color:#000>item_list2</span>, <span style=color:#000>key_func</span><span style=color:#000>=</span><span style=color:#a90d91>lambda</span> <span style=color:#000>key</span>: <span style=color:#000>key</span><span style=color:#000>.</span><span style=color:#000>id</span>) <span style=color:#a90d91>if</span> <span style=color:#000>item_list2</span> <span style=color:#a90d91>else</span> {} <span style=color:#177500># item_dict2={}</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>print</span>(<span style=color:#000>item_dict2</span>)
</span></span></code></pre></td></tr></table></div></div></div><h2 id=split-list>split_list</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>recon_id_list</span> <span style=color:#000>=</span> [<span style=color:#1c01ce>1</span>, <span style=color:#1c01ce>2</span>, <span style=color:#1c01ce>3</span>, <span style=color:#1c01ce>4</span>, <span style=color:#1c01ce>5</span>, <span style=color:#1c01ce>6</span>]
</span></span><span style=display:flex><span><span style=color:#000>loop_num</span> <span style=color:#000>=</span> <span style=color:#1c01ce>3</span>
</span></span><span style=display:flex><span><span style=color:#000>split_list</span> <span style=color:#000>=</span> [<span style=color:#000>recon_id_list</span>[<span style=color:#000>i</span>:<span style=color:#000>i</span> <span style=color:#000>+</span> <span style=color:#000>loop_num</span>] <span style=color:#a90d91>for</span> <span style=color:#000>i</span> <span style=color:#000>in</span> <span style=color:#a90d91>range</span>(<span style=color:#1c01ce>0</span>, <span style=color:#a90d91>len</span>(<span style=color:#000>recon_id_list</span>), <span style=color:#000>loop_num</span>)]
</span></span></code></pre></td></tr></table></div></div></div><h2 id=date日期>date日期</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>from</span> <span style=color:#000>datetime</span> <span style=color:#a90d91>import</span> <span style=color:#000>date</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>datetime</span>
</span></span><span style=display:flex><span><span style=color:#177500># date日期，2020-12-08</span>
</span></span><span style=display:flex><span><span style=color:#000>today</span> <span style=color:#000>=</span> <span style=color:#000>date</span><span style=color:#000>.</span><span style=color:#000>today</span>()
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>today</span><span style=color:#000>.</span><span style=color:#000>year</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>today</span><span style=color:#000>.</span><span style=color:#000>month</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>today</span><span style=color:#000>.</span><span style=color:#000>day</span>)
</span></span><span style=display:flex><span><span style=color:#000>tomorrow</span> <span style=color:#000>=</span> <span style=color:#000>today</span> <span style=color:#000>+</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>timedelta</span>(<span style=color:#000>days</span><span style=color:#000>=</span><span style=color:#1c01ce>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 自定义日期</span>
</span></span><span style=display:flex><span><span style=color:#000>mydate</span><span style=color:#000>=</span><span style=color:#000>date</span>(<span style=color:#1c01ce>2020</span>,<span style=color:#1c01ce>12</span>,<span style=color:#1c01ce>15</span>)
</span></span><span style=display:flex><span><span style=color:#177500># 计算相隔天数</span>
</span></span><span style=display:flex><span><span style=color:#000>diff</span> <span style=color:#000>=</span> <span style=color:#a90d91>str</span>((<span style=color:#000>date</span><span style=color:#000>.</span><span style=color:#000>today</span>() <span style=color:#000>-</span> <span style=color:#000>mydate</span>)<span style=color:#000>.</span><span style=color:#000>days</span>) <span style=color:#a90d91>if</span> <span style=color:#000>mydate</span> <span style=color:#a90d91>else</span> <span style=color:#a90d91>None</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># date转datetime</span>
</span></span><span style=display:flex><span><span style=color:#000>today_time</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>combine</span>(<span style=color:#000>today</span>, <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>min</span><span style=color:#000>.</span><span style=color:#000>time</span>())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>utc_now_date</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>utcnow</span>()<span style=color:#000>.</span><span style=color:#000>date</span>()
</span></span></code></pre></td></tr></table></div></div></div><h2 id=datetime时间>datetime时间</h2><style>.highlight{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:130%}.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}</style><details class=code-collapse><summary>Expand/Collapse Code Block</summary><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#177500># datetime时间</span>
</span></span><span style=display:flex><span><span style=color:#000>now_time</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>now</span>()
</span></span><span style=display:flex><span><span style=color:#177500># 自定义时间格式化字符串</span>
</span></span><span style=display:flex><span><span style=color:#000>time_format_str</span> <span style=color:#000>=</span> <span style=color:#000>now_time</span><span style=color:#000>.</span><span style=color:#000>strftime</span>(<span style=color:#c41a16>&#34;%Y-%m-</span><span style=color:#c41a16>%d</span><span style=color:#c41a16> %H:%M:%S&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500>#自定义制定时间</span>
</span></span><span style=display:flex><span><span style=color:#000>now_time</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>datetime</span>(<span style=color:#1c01ce>2020</span>, <span style=color:#1c01ce>10</span>, <span style=color:#1c01ce>15</span>, <span style=color:#1c01ce>12</span>, <span style=color:#1c01ce>32</span>, <span style=color:#1c01ce>40</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500>#字符串转日期</span>
</span></span><span style=display:flex><span><span style=color:#000>s</span> <span style=color:#000>=</span> <span style=color:#c41a16>&#34;2020-08-05 2:30:20&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>t</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>strptime</span>(<span style=color:#000>s</span>, <span style=color:#c41a16>&#34;%Y-%m-</span><span style=color:#c41a16>%d</span><span style=color:#c41a16> %H:%M:%S&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>t</span><span style=color:#000>.</span><span style=color:#000>year</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>t</span><span style=color:#000>.</span><span style=color:#000>month</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>t</span><span style=color:#000>.</span><span style=color:#000>day</span>)
</span></span><span style=display:flex><span><span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>combine</span>(<span style=color:#000>should_pay_date</span> <span style=color:#000>+</span> <span style=color:#000>timedelta</span>(<span style=color:#000>days</span><span style=color:#000>=</span><span style=color:#1c01ce>1</span>), <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>min</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 前一天时间</span>
</span></span><span style=display:flex><span><span style=color:#000>yesterday_time</span> <span style=color:#000>=</span> <span style=color:#000>now_time</span> <span style=color:#000>+</span> <span style=color:#000>timedelta</span>(<span style=color:#000>days</span><span style=color:#000>=-</span><span style=color:#1c01ce>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># datetime转date</span>
</span></span><span style=display:flex><span><span style=color:#000>t_date</span> <span style=color:#000>=</span> <span style=color:#000>t</span><span style=color:#000>.</span><span style=color:#000>date</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># utc时间转当前时区</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>datetime_from_utc_to_local</span>(<span style=color:#000>utc_datetime</span>):
</span></span><span style=display:flex><span>    <span style=color:#000>now_timestamp</span> <span style=color:#000>=</span> <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>time</span>()
</span></span><span style=display:flex><span>    <span style=color:#000>offset</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>fromtimestamp</span>(<span style=color:#000>now_timestamp</span>) <span style=color:#000>-</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>utcfromtimestamp</span>(<span style=color:#000>now_timestamp</span>)
</span></span><span style=display:flex><span>    <span style=color:#177500># print(offset)</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> <span style=color:#000>utc_datetime</span> <span style=color:#000>+</span> <span style=color:#000>offset</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># time_zone = 8</span>
</span></span><span style=display:flex><span><span style=color:#000>local_date</span> <span style=color:#000>=</span> <span style=color:#000>time_start</span> <span style=color:#000>+</span> <span style=color:#000>timedelta</span>(<span style=color:#000>hours</span><span style=color:#000>=</span><span style=color:#a90d91>float</span>(<span style=color:#000>time_zone</span>)) 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># python2 datetime转时间戳</span>
</span></span><span style=display:flex><span><span style=color:#000>now_time</span> <span style=color:#000>=</span> <span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>datetime</span><span style=color:#000>.</span><span style=color:#000>utcnow</span>()
</span></span><span style=display:flex><span><span style=color:#177500># print(time.time())  当前时区的时间，差8小时</span>
</span></span><span style=display:flex><span><span style=color:#000>time_stramp</span> <span style=color:#000>=</span> <span style=color:#000>long</span>(<span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>mktime</span>(<span style=color:#000>now_time</span><span style=color:#000>.</span><span style=color:#000>timetuple</span>()))
</span></span></code></pre></td></tr></table></div></div></details><br><h2 id=去除全角半角>去除全角半角</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>full2half</span>(<span style=color:#000>s</span>):
</span></span><span style=display:flex><span>    <span style=color:#000>n</span> <span style=color:#000>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#a90d91>for</span> <span style=color:#000>char</span> <span style=color:#000>in</span> <span style=color:#000>s</span>:
</span></span><span style=display:flex><span>        <span style=color:#000>num</span> <span style=color:#000>=</span> <span style=color:#a90d91>ord</span>(<span style=color:#000>char</span>)
</span></span><span style=display:flex><span>        <span style=color:#a90d91>if</span> <span style=color:#000>num</span> <span style=color:#000>==</span> <span style=color:#1c01ce>0x3000</span>:
</span></span><span style=display:flex><span>            <span style=color:#000>num</span> <span style=color:#000>=</span> <span style=color:#1c01ce>32</span>
</span></span><span style=display:flex><span>        <span style=color:#a90d91>elif</span> <span style=color:#1c01ce>0xFF01</span> <span style=color:#000>&lt;=</span> <span style=color:#000>num</span> <span style=color:#000>&lt;=</span> <span style=color:#1c01ce>0xFF5E</span>:
</span></span><span style=display:flex><span>            <span style=color:#000>num</span> <span style=color:#000>-=</span> <span style=color:#1c01ce>0xfee0</span>
</span></span><span style=display:flex><span>        <span style=color:#000>num</span> <span style=color:#000>=</span> <span style=color:#000>unichr</span>(<span style=color:#000>num</span>)
</span></span><span style=display:flex><span>        <span style=color:#000>n</span><span style=color:#000>.</span><span style=color:#000>append</span>(<span style=color:#000>num</span>)
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> <span style=color:#c41a16>&#39;&#39;</span><span style=color:#000>.</span><span style=color:#000>join</span>(<span style=color:#000>n</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>clear_format</span>(<span style=color:#000>input_str</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> <span style=color:#000>full2half</span>(<span style=color:#a90d91>str</span>(<span style=color:#000>input_str</span>))<span style=color:#000>.</span><span style=color:#000>replace</span>(<span style=color:#c41a16>u</span><span style=color:#c41a16>&#39; &#39;</span>, <span style=color:#c41a16>u</span><span style=color:#c41a16>&#39;&#39;</span>)<span style=color:#000>.</span><span style=color:#000>lower</span>()
</span></span></code></pre></td></tr></table></div></div></div><h2 id=populate-obj>populate_obj</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plain data-lang=plain><span style=display:flex><span># o1-old  o2-new
</span></span><span style=display:flex><span>def populate_obj(o1, o2, ignore_attr_names=None):
</span></span><span style=display:flex><span>    attr_list = vars(o1).keys()
</span></span><span style=display:flex><span>    for attr in attr_list:
</span></span><span style=display:flex><span>        if attr.startswith(&#39;_&#39;):
</span></span><span style=display:flex><span>            continue
</span></span><span style=display:flex><span>        if ignore_attr_names and attr in ignore_attr_names:
</span></span><span style=display:flex><span>            continue
</span></span><span style=display:flex><span>        if hasattr(o2, attr):
</span></span><span style=display:flex><span>            setattr(o2, attr, getattr(o1, attr))
</span></span></code></pre></td></tr></table></div></div></div><h1 id=使用excel>使用excel</h1><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>python</span> <span style=color:#000>xlrd读取excel</span><span style=color:#000>，</span><span style=color:#000>ctype</span><span style=color:#000>=</span><span style=color:#000>sheet1</span><span style=color:#000>.</span><span style=color:#000>cell</span>(<span style=color:#000>i</span>,<span style=color:#000>j</span>)<span style=color:#000>.</span><span style=color:#000>ctype</span><span style=color:#000>，</span><span style=color:#000>有以下几种类型</span><span style=color:#000>：</span>
</span></span><span style=display:flex><span><span style=color:#1c01ce>0</span> <span style=color:#000>–</span> <span style=color:#000>empty</span><span style=color:#000>：</span><span style=color:#000>空</span>
</span></span><span style=display:flex><span><span style=color:#1c01ce>1</span> <span style=color:#000>–</span> <span style=color:#000>string</span><span style=color:#000>：</span><span style=color:#000>字符串</span>
</span></span><span style=display:flex><span><span style=color:#1c01ce>2</span> <span style=color:#000>–</span> <span style=color:#000>number</span><span style=color:#000>：</span><span style=color:#000>数字</span>
</span></span><span style=display:flex><span><span style=color:#1c01ce>3</span> <span style=color:#000>–</span> <span style=color:#000>date</span><span style=color:#000>：</span><span style=color:#000>日期</span>
</span></span><span style=display:flex><span><span style=color:#1c01ce>4</span> <span style=color:#000>–</span> <span style=color:#000>boolean</span><span style=color:#000>：</span><span style=color:#000>布尔</span>
</span></span><span style=display:flex><span><span style=color:#1c01ce>5</span> <span style=color:#000>–</span> <span style=color:#000>error</span> 
</span></span></code></pre></td></tr></table></div></div></div><h1 id=打包>打包</h1><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>pyinstaller</span> <span style=color:#000>-</span><span style=color:#000>F</span> <span style=color:#000>-</span><span style=color:#000>w</span> <span style=color:#000>roster</span><span style=color:#000>.</span><span style=color:#000>py</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>sudo</span> <span style=color:#000>chmod</span> <span style=color:#1c01ce>777</span> <span style=color:#000>roster</span> 
</span></span></code></pre></td></tr></table></div></div></div><h1 id=装饰器>装饰器</h1><p>参考：<a href=https://zhuanlan.zhihu.com/p/45458873>https://zhuanlan.zhihu.com/p/45458873</a></p><p>高阶函数：接受函数为入参，或者把函数作为结果返回的函数。后者称之为嵌套函数。</p><p>闭包：指延伸了作用域的函数，其中包含函数定义体中引用、但是不在定义体中定义的非全局变量。概念比较晦涩，简单来说就是嵌套函数引用了外层函数的变量。</p><h2 id=高阶函数>高阶函数</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>add</span>(<span style=color:#000>a</span>, <span style=color:#000>b</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>print</span>(<span style=color:#000>a</span> <span style=color:#000>+</span> <span style=color:#000>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#177500># 高阶函数</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>timer</span>(<span style=color:#000>func</span>,<span style=color:#000>*</span><span style=color:#000>args</span>):
</span></span><span style=display:flex><span>    <span style=color:#000>start</span> <span style=color:#000>=</span> <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>time</span>()
</span></span><span style=display:flex><span>    <span style=color:#000>func</span>(<span style=color:#000>*</span><span style=color:#000>args</span>)
</span></span><span style=display:flex><span>    <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>sleep</span>(<span style=color:#1c01ce>2</span>) <span style=color:#177500># 模拟耗时操作</span>
</span></span><span style=display:flex><span>    <span style=color:#000>long</span> <span style=color:#000>=</span> <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>time</span>() <span style=color:#000>-</span> <span style=color:#000>start</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>print</span>(<span style=color:#000>long</span>)
</span></span><span style=display:flex><span><span style=color:#000>timer</span>(<span style=color:#000>add</span>, <span style=color:#1c01ce>1</span>, <span style=color:#1c01ce>2</span>)   
</span></span></code></pre></td></tr></table></div></div></div><h2 id=装饰器-1>装饰器</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>timer</span>(<span style=color:#000>func</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>def</span> <span style=color:#000>wrapper</span>(<span style=color:#000>*</span><span style=color:#000>args</span>, <span style=color:#000>**</span><span style=color:#000>kwargs</span>):
</span></span><span style=display:flex><span>        <span style=color:#000>start</span> <span style=color:#000>=</span> <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>time</span>()
</span></span><span style=display:flex><span>        <span style=color:#000>func</span>(<span style=color:#000>*</span><span style=color:#000>args</span>, <span style=color:#000>**</span><span style=color:#000>kwargs</span>) <span style=color:#177500># 此处拿到了被装饰的函数func</span>
</span></span><span style=display:flex><span>        <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>sleep</span>(<span style=color:#1c01ce>2</span>) <span style=color:#177500># 模拟耗时操作</span>
</span></span><span style=display:flex><span>        <span style=color:#000>long</span> <span style=color:#000>=</span> <span style=color:#000>time</span><span style=color:#000>.</span><span style=color:#000>time</span>() <span style=color:#000>-</span> <span style=color:#000>start</span>
</span></span><span style=display:flex><span>        <span style=color:#a90d91>print</span>(<span style=color:#000>long</span>)
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> <span style=color:#000>wrapper</span> <span style=color:#177500>#返回内层函数的引用</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>@timer</span> <span style=color:#177500># @为语法糖，相当于timer(add)，如果time有多个，顺序靠前的在里面</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>add</span>(<span style=color:#000>a</span>, <span style=color:#000>b</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>print</span>(<span style=color:#000>a</span> <span style=color:#000>+</span> <span style=color:#000>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>add</span>(<span style=color:#1c01ce>1</span>, <span style=color:#1c01ce>2</span>) <span style=color:#177500>#正常调用add</span>
</span></span></code></pre></td></tr></table></div></div></div><p>装饰器的加载到执行的流程：
模块加载 ->> 遇到@，执行timer函数，传入add函数 ->> 生成timer.<locals>.wrapper函数并命名为add，其实是覆盖了原同名函数 ->> 调用add(1, 2) ->> 去执行timer.<locals>.wrapper(1, 2) ->> wrapper内部持有原add函数引用(func)，调用func(1, 2) ->>继续执行完wrapper函数</p><h2 id=带参数的装饰器>带参数的装饰器</h2><style>.highlight{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:130%}.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}</style><details class=code-collapse><summary>Expand/Collapse Code Block</summary><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>auth</span>(<span style=color:#000>permission</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>def</span> <span style=color:#000>_auth</span>(<span style=color:#000>func</span>):
</span></span><span style=display:flex><span>        <span style=color:#177500># 注意这个functools.wraps的作用</span>
</span></span><span style=display:flex><span>        <span style=color:#000>@functools</span><span style=color:#000>.</span><span style=color:#000>wraps</span>(<span style=color:#000>func</span>)
</span></span><span style=display:flex><span>        <span style=color:#a90d91>def</span> <span style=color:#000>wrapper</span>(<span style=color:#000>*</span><span style=color:#000>args</span>, <span style=color:#000>**</span><span style=color:#000>kwargs</span>):
</span></span><span style=display:flex><span>            <span style=color:#a90d91>print</span>(<span style=color:#c41a16>&#34;auth = &#34;</span> <span style=color:#000>+</span> <span style=color:#000>permission</span>)
</span></span><span style=display:flex><span>            <span style=color:#000>func</span>(<span style=color:#000>*</span><span style=color:#000>args</span>, <span style=color:#000>**</span><span style=color:#000>kwargs</span>)
</span></span><span style=display:flex><span>            <span style=color:#a90d91>print</span>(<span style=color:#c41a16>&#34;DONE...&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a90d91>return</span> <span style=color:#000>wrapper</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>return</span> <span style=color:#000>_auth</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>@auth</span>(<span style=color:#c41a16>&#34;ADD&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>add</span>(<span style=color:#000>a</span>, <span style=color:#000>b</span>):
</span></span><span style=display:flex><span>    <span style=color:#c41a16>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    SUM
</span></span></span><span style=display:flex><span><span style=color:#c41a16>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a90d91>print</span>(<span style=color:#000>a</span> <span style=color:#000>+</span> <span style=color:#000>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>add</span>(<span style=color:#1c01ce>1</span>, <span style=color:#1c01ce>2</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>add</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>add</span><span style=color:#000>.</span><span style=color:#000>__name__</span>)
</span></span><span style=display:flex><span><span style=color:#a90d91>print</span>(<span style=color:#000>add</span><span style=color:#000>.</span><span style=color:#000>__doc__</span>)
</span></span></code></pre></td></tr></table></div></div></details><br><p>functools.wraps对我们的装饰器函数进行了装饰之后，add表面上看起来还是add。
functools.wraps内部通过partial和update_wrapper对函数进行再加工，将原始被装饰函数(add)的属性拷贝给装饰器函数(wrapper)。</p><h1 id=functools>functools</h1><p>参考：<a href=https://zhuanlan.zhihu.com/p/45535784>https://zhuanlan.zhihu.com/p/45535784</a></p><h2 id=wraps>wraps</h2><p>同带参修饰器</p><h2 id=partial>partial</h2><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>import</span> <span style=color:#000>functools</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a90d91>def</span> <span style=color:#000>add</span>(<span style=color:#000>a</span>, <span style=color:#000>b</span>):
</span></span><span style=display:flex><span>    <span style=color:#a90d91>print</span>(<span style=color:#000>a</span> <span style=color:#000>+</span> <span style=color:#000>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>add</span> <span style=color:#000>=</span> <span style=color:#000>functools</span><span style=color:#000>.</span><span style=color:#000>partial</span>(<span style=color:#000>add</span>, <span style=color:#1c01ce>1</span>)
</span></span><span style=display:flex><span><span style=color:#000>add</span>(<span style=color:#1c01ce>2</span>)
</span></span></code></pre></td></tr></table></div></div></div><p>add函数原本接收两个参数a和b，经过partial包装之后，a参数的值被固定为了1，新的add对象（注意此处add已经是一个可调用对象，而非函数，下文分析源码会看到）只需要接收一个参数即可。
通俗点说：<strong>就是把原函数的部分参数固定了初始值，新的调用只需要传递其它参数。</strong></p></div><div class=td-content style=page-break-before:always><h1 id=pg-239a38d334b1b526cda12cea08410f28>2 - selenium使用</h1><blockquote><p>使用selenium操作已经打开的浏览器页面，避免输入密码等繁杂操作</p></blockquote><h1 id=背景>背景</h1><p>在使用selenium进行自动化测试会遇到，手工打开浏览器，做了一部分操作后，并打开相关页面后再执行相关的自动化脚本。如何使用selenium来接管先前已打开的浏览器呢？醍提出一个Google Chrome浏览器的解决方案。</p><h1 id=实战>实战</h1><p>我们可以利用Chrome DevTools协议。它允许客户检查和调试Chrome浏览器。</p><p>将执行文件加入path：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#177500># mac中</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>cd</span> ~
</span></span><span style=display:flex><span>vi .bash_profile 
</span></span></code></pre></td></tr></table></div></div></div><p>输入以下内容<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>PATH</span><span style=color:#000>=</span><span style=color:#000>$PATH</span><span style=color:#000>:/</span><span style=color:#000>Applications</span><span style=color:#000>/</span><span style=color:#000>Google</span><span style=color:#000>\</span> <span style=color:#000>Chrome</span><span style=color:#000>.</span><span style=color:#836c28>app</span><span style=color:#000>/</span><span style=color:#000>Contents</span><span style=color:#000>/</span><span style=color:#000>MacOS</span><span style=color:#000>/</span> 
</span></span></code></pre></td></tr></table></div></div></div></p><p>保存并退出<style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#a90d91>source</span> .bash_profile 
</span></span></code></pre></td></tr></table></div></div></div></p><p>打开cmd，在命令行中输入命令：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>chrome.exe --remote-debugging-port<span style=color:#000>=</span><span style=color:#1c01ce>9222</span> --user-data-dir<span style=color:#000>=</span><span style=color:#c41a16>&#34;d:	emp\selenum\AutomationProfile” 
</span></span></span></code></pre></td></tr></table></div></div></div><p>mac中：</p><style>.td-content .highlight{margin-top:.5rem;margin-bottom:.5rem}.code-collapse1{overflow-y:auto;max-height:500px;overflow-x:auto;max-width:100%}</style><div class=code-collapse1><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>Google<span style=color:#c41a16>\ </span>Chrome --remote-debugging-port<span style=color:#000>=</span><span style=color:#1c01ce>9222</span> --user-data-dir<span style=color:#000>=</span><span style=color:#c41a16>&#34;/Users/bo/Library/Application Support/Googlehrome/Default&#34;</span>
</span></span><span style=display:flex><span><span style=color:#177500># /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome</span>
</span></span><span style=display:flex><span><span style=color:#177500># 注意命令行中需要加入\，代码中则不需要 </span>
</span></span></code></pre></td></tr></table></div></div></div><p>对于-remote-debugging-port值，可以指定任何打开的端口。</p><p>对于-user-data-dir标记，指定创建新Chrome配置文件的目录。它是为了确保在单独的配置文件中启动chrome，不会污染你的默认配置文件。</p><p>此时会打开一个浏览器页面，我们输入百度网址，我们把它当成一个已存在的浏览器：</p><p>现在，我们需要接管上面的浏览器。新建一个python文件，运行以下代码：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a90d91>from</span> <span style=color:#000>selenium</span> <span style=color:#a90d91>import</span> <span style=color:#000>webdriver</span>
</span></span><span style=display:flex><span><span style=color:#a90d91>from</span> <span style=color:#000>selenium.webdriver.chrome.options</span> <span style=color:#a90d91>import</span> <span style=color:#000>Options</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#000>chrome_options</span> <span style=color:#000>=</span> <span style=color:#000>Options</span>()
</span></span><span style=display:flex><span><span style=color:#000>chrome_options</span><span style=color:#000>.</span><span style=color:#000>add_experimental_option</span>(<span style=color:#c41a16>&#34;debuggerAddress&#34;</span>, <span style=color:#c41a16>&#34;127.0.0.1:9222&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#000>chrome_driver</span> <span style=color:#000>=</span> <span style=color:#c41a16>&#34;d:\python_tool</span>
</span></span></code></pre></td></tr></table></div></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Herb 保留所有权利</small>
<small class=ml-1><a href=# target=_blank rel=noopener>隐私政策</a></small><p class=mt-2><a href=/about/>Herbdocs</a></p></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>